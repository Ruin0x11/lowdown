<div id="page-header">
  <h1>Mark Data Entry Complete for Trips and Runs</h1>
</div>

<%= form_for @query, :html=>{:id=>"trip-filter", :method=>:post}, :url=>{:action=>:bulk_update} do |f| %>
  <fieldset>

    <p>Mark all trips and runs complete for the following period:</p>

    <ol class="section first">
      <li><%= f.label :start_date, "Start Date:" %> <%= f.text_field :start_date, :class=>"datepicker", :required => :required %></li>
      <li><%= f.label :end_date, "End Date:" %> <%= f.text_field :end_date, :class=>"datepicker", :required => :required %></li>
      <li><%= f.label :provider, "Provider:" %> <%= f.select :provider, options_for_select(@providers), :required => :required %></li> 
    </ol>

    <div class="actions">
      <%= submit_tag 'Update' %>
    </div>

  </fieldset>
<% end %>

<% if @incomplete_trips.present? %>
  <h2>Trips with data entry not complete from <%= @query.start_date.to_s(:long) %> through <%= @query.end_date.to_s(:long) %>:</h2>
  <table id="data-entry-not-complete">
    <% @incomplete_trips.keys.sort_by(&:name).each do |provider| %>
      <tr>
        <td>
          <%= provider.name %>
        </td>
        <td class="number">
          <%= @incomplete_trips[provider] %>
        </td>
      </tr>
    <% end %>
  </table>
<% else %>
  <h2>There are no trips with data entry not complete from <%= @query.start_date.to_s(:long) %> through <%= @query.end_date.to_s(:long) %></h2>
<% end %>
