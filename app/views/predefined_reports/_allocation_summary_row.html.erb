<tr>
  <% allocation = Allocation.member_allocation(value) %>
  <% @groupings[level..-1].each do |group| %>
    <%= content_tag :td, :rowspan => Allocation.count_leaves(value, @groupings.size - level - 1) do %>
      <%= allocation.send(group[1]) %>
    <% end %>
  <% end %>
</tr>
<% unless level == @groupings.size %>
  <% value.each do |this_key, this_value| %>
    <%= render "predefined_reports/allocation_summary_row", :value => this_value, :level => (level + 1) %>
  <% end %>
<% end %>
